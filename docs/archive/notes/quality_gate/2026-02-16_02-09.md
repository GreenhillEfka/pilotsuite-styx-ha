# Quality Gate Report - 2026-02-16 02:09

## Summary: ⚠️ FAILED

---

## 1. Python Syntax Check

| Repo | Status |
|------|--------|
| HA Integration | ✅ PASS |
| Core Add-on | ✅ PASS |

---

## 2. Unit Tests

### HA Integration: ⚠️ 15 FAILED, 331 passed, 2 skipped

**Root Cause:** Test isolation issue (RuntimeWarnings from unawaited coroutines)

**Failed Tests:**
- `test_habitus_miner.py` (6 failures) - skip marker not respected
- `test_repairs_workflow.py` (9 failures) - `_mock_methods` AttributeError

**Warnings:**
```
test_core_api_v1_v2.py - RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
test_tag_sync_integration.py - RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
```

**Analysis:**
- Tests pass when run individually
- Full suite fails due to async mock pollution
- Same issue as documented in HEARTBEAT.md

### Core Add-on: ❌ ERROR

**Issue:** ModuleNotFoundError: No module named 'copilot_sdk'
```
sdk/python/tests/test_client.py:8: ImportError
```

---

## 3. Test Coverage

- HA Integration: Not measured (pytest failed)
- Core Add-on: Not measured (collection error)

---

## 4. CHANGELOG Validation

| Repo | Manifest | CHANGELOG Latest | Status |
|------|----------|------------------|--------|
| HA Integration | 0.13.0 | 0.13.0 | ✅ SYNC |
| Core Add-on | 0.8.0 | 0.7.0 | ❌ MISMATCH |

**Issue:** Core Add-on config.json has version 0.8.0, but CHANGELOG.md only shows 0.7.0 as latest entry.

---

## 5. Recommended Actions

### HA Integration
1. Fix async mock issues in `test_core_api_v1_v2.py`
2. Fix async mock issues in `test_tag_sync_integration.py`
3. Verify `habitus_miner` skip marker works correctly

### Core Add-on
1. Update CHANGELOG.md with 0.8.0 entry OR
2. Revert config.json version to 0.7.0 if not yet released
3. Fix `copilot_sdk` import path in `sdk/python/tests/test_client.py`

---

## Files to Fix

```
ai_home_copilot_hacs_repo/tests/test_core_api_v1_v2.py
ai_home_copilot_hacs_repo/tests/test_tag_sync_integration.py
ha-copilot-repo/CHANGELOG.md
ha-copilot-repo/sdk/python/tests/test_client.py
```